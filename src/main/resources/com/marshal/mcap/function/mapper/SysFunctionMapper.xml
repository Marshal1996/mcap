<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.marshal.mcap.function.mapper.SysFunctionMapper">
  <resultMap id="BaseResultMap" type="com.marshal.mcap.function.entity.SysFunction">
    <id column="FUNCTION_ID" jdbcType="BIGINT" property="functionId" />
    <result column="MODULE_CODE" jdbcType="VARCHAR" property="moduleCode" />
    <result column="FUNCTION_ICON" jdbcType="VARCHAR" property="functionIcon" />
    <result column="FUNCTION_CODE" jdbcType="VARCHAR" property="functionCode" />
    <result column="FUNCTION_NAME" jdbcType="VARCHAR" property="functionName" />
    <result column="FUNCTION_DESCRIPTION" jdbcType="VARCHAR" property="functionDescription" />
    <result column="RESOURCE_ID" jdbcType="BIGINT" property="resourceId" />
    <result column="PARENT_FUNCTION_ID" jdbcType="BIGINT" property="parentFunctionId" />
    <result column="ENABLE_FLAG" jdbcType="VARCHAR" property="enableFlag" />
    <result column="FUNCTION_SEQUENCE" jdbcType="DECIMAL" property="functionSequence" />
    <!--custom-->
    <result column="url" jdbcType="VARCHAR" property="url" />
  </resultMap>
  <sql id="Base_Column_List">
    FUNCTION_ID,MODULE_CODE,FUNCTION_ICON,FUNCTION_CODE,FUNCTION_NAME,FUNCTION_DESCRIPTION,
    RESOURCE_ID,PARENT_FUNCTION_ID,ENABLE_FLAG,FUNCTION_SEQUENCE
  </sql>

  <select id="selectTopFunctions" resultType="com.marshal.mcap.function.entity.SysFunction">
    select
    sf.function_id,sf.function_name,sf.function_icon,sr.url
    from
    sys_function sf
    left join sys_resource sr on sf.resource_id=sr.resource_id
    where
    parent_function_id is null or parent_function_id =''
  </select>

  <select id="selectChildFunctions" parameterType="java.lang.Long" resultType="com.marshal.mcap.function.entity.SysFunction">
    select
    sf.function_id,sf.function_name,sf.function_icon,sr.url
    from
    sys_function sf
    left join sys_resource sr on sf.resource_id=sr.resource_id
    where
    parent_function_id=#{functionId}
  </select>

</mapper>